<!DOCTYPE html>
<html>
    <head>
        <title>Anime OPs</title>
        <script src='./ops.js'></script>
        <script src='../libary/sg.js'></script>
        <link rel="stylesheet" href="./ops.css">
    </head>
    <body>
        <!-- Play all button, gets all .video elements, and loops through them -->
        <!-- Play all from here button, gets all .video elements, and loops through them from indexof(this)-->
        <button id='keepplaying'></button>
        <p id='playlistlength' style='display: none;'></p>
        <div id='playlist'></div>

        <script src="https://www.youtube.com/player_api"></script>
        <div id='videoplayer'></div>

        <script>
            // create youtube player
            var player, width=560, height=315
            if(sg.onMobile()){
                var ratio = height / width
                width=window.innerWidth;height=window.innerWidth * ratio
            }

            function onYouTubePlayerAPIReady() {
                player = new YT.Player('videoplayer', {
                height: height.toString(),
                width: width.toString(),
                videoId: '',
                events: {
                    'onReady': onPlayerReady,
                    'onStateChange': onPlayerStateChange
                }
                });
            }

            // autoplay video
            function onPlayerReady(event) {
                event.target.playVideo();
            }

            // when video ends
            function onPlayerStateChange(event) {        
                if(event.data === 0) {
                    if(keepPlaying) player.loadVideoById(vidIds[vidPos++], 0, 'large')
                }
            }
        </script>
    </body>
</html>